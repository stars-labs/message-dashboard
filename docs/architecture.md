# 短信验证码管理系统架构文档

## 系统概述

本系统用于管理和展示来自95个EC20模块的短信消息，主要功能包括验证码提取、历史记录查询和结构化展示。

## 硬件架构

```
┌─────────────────────────────────────────────────┐
│          香橙派 5 Plus (RK3588)                  │
│                                                 │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐  │
│  │  EC20 #1  │  │  EC20 #2  │  │ EC20 #95  │  │
│  │   (USB)   │  │   (USB)   │  │   (USB)   │  │
│  └─────┬─────┘  └─────┬─────┘  └─────┬─────┘  │
│        │              │              │          │
│        └──────────────┴──────────────┘          │
│                       │                         │
│                  ┌────┴────┐                    │
│                  │ USB Hub │                    │
│                  └────┬────┘                    │
└───────────────────────┼─────────────────────────┘
                        │
                   ┌────┴────┐
                   │  Web UI │
                   └─────────┘
```

## 软件架构

### 前端架构

```
┌─────────────────────────────────────────────────┐
│                   Web 应用                       │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────────┐  ┌────────────────────────┐  │
│  │   Svelte     │  │    Tailwind CSS      │  │
│  │  Framework   │  │   Styling Framework  │  │
│  └──────┬───────┘  └────────────────────────┘  │
│         │                                       │
│  ┌──────┴───────────────────────────────────┐  │
│  │           组件层 (Components)            │  │
│  ├─────────────────────────────────────────┤  │
│  │ • Dashboard (主控制面板)                 │  │
│  │ • PhoneList (号码列表)                  │  │
│  │ • MessageView (消息视图)                │  │
│  │ • HistoryView (历史记录)                │  │
│  │ • FilterBar (筛选栏)                    │  │
│  └─────────────────────────────────────────┘  │
│                                                 │
│  ┌─────────────────────────────────────────┐  │
│  │          数据层 (Mock Data)             │  │
│  ├─────────────────────────────────────────┤  │
│  │ • 号码信息 (国家、运营商、状态)         │  │
│  │ • 消息记录 (时间、内容、来源)           │  │
│  │ • 验证码提取结果                        │  │
│  └─────────────────────────────────────────┘  │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 数据模型

```typescript
// 号码信息
interface PhoneNumber {
  id: string;           // EC20模块ID (1-95)
  number: string;       // 电话号码
  country: 'CN' | 'HK' | 'SG';  // 国家/地区
  carrier: string;      // 运营商
  status: 'online' | 'offline' | 'error';
  lastActive: Date;     // 最后活跃时间
}

// 消息记录
interface Message {
  id: string;
  phoneId: string;      // 关联的号码ID
  sender: string;       // 发送方
  content: string;      // 原始消息内容
  timestamp: Date;      // 接收时间
  verificationCode?: string;  // 提取的验证码
  source: string;       // 来源应用/网站
}
```

## 功能模块

### 1. 主控制面板 (Dashboard)
- 显示系统概览信息
- 在线设备数量统计
- 今日消息统计
- 验证码提取成功率

### 2. 号码管理
- 号码列表展示
- 按国家/地区筛选
- 状态指示器
- 快速搜索

### 3. 消息展示
- 实时消息流
- 验证码高亮显示
- 按来源分组
- 时间轴视图

### 4. 历史查询
- 日期范围选择
- 多条件组合查询
- 导出功能
- 统计分析

## 界面布局

```
┌─────────────────────────────────────────────────┐
│                   顶部导航栏                     │
├───────────────┬─────────────────────────────────┤
│               │                                 │
│   号码列表     │          消息展示区             │
│               │                                 │
│  ┌─────────┐  │  ┌───────────────────────────┐ │
│  │ 🇨🇳 中国  │  │  │   最新消息               │ │
│  │ +86...  │  │  ├───────────────────────────┤ │
│  │ 在线    │  │  │ 来源: 淘宝                │ │
│  └─────────┘  │  │ 验证码: 123456           │ │
│               │  │ 时间: 10:30:45           │ │
│  ┌─────────┐  │  └───────────────────────────┘ │
│  │ 🇭🇰 香港  │  │                                 │
│  │ +852... │  │  ┌───────────────────────────┐ │
│  │ 在线    │  │  │   历史记录               │ │
│  └─────────┘  │  │   [图表和列表]           │ │
│               │  └───────────────────────────┘ │
└───────────────┴─────────────────────────────────┘
```

## 技术特点

1. **响应式设计**: 适配电脑和手机屏幕
2. **实时更新**: 使用 Svelte 的响应式特性
3. **高性能**: 虚拟列表处理大量数据
4. **离线优先**: 本地缓存机制
5. **国际化**: 支持多语言界面

## 部署方案

1. 前端静态文件部署在香橙派本地
2. 通过局域网访问 Web 界面
3. 支持端口转发实现远程访问
4. 未来可扩展为客户端-服务器架构